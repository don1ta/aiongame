# 歷史趨勢曲線圖整合說明

## 目標
將「裝備等級成長曲線」和「排名歷史趨勢」合併成一個統一的曲線圖,可以透過按鈕切換不同的資料類型。

## HTML 結構 (已完成)
✅ 已在 aion.html 中加入統一的歷史趨勢曲線圖卡片
- Canvas ID: `trend-chart`
- 資訊顯示 ID: `trend-info`
- 按鈕 class: `trend-tab`
- 按鈕 data-type: `itemLevel`, `1`, `3`, `4`, `6`, `20`, `21`

## JavaScript 需要修改的部分

### 1. 移除舊函數
需要移除或重命名:
- `renderItemLevelChart()` 
- `renderRankingChart()`
- 相關的 chart instance 變數

### 2. 創建新的統一函數
```javascript
let trendChartInstance = null;

function renderTrendChart(json, type = 'itemLevel') {
    const canvas = document.getElementById('trend-chart');
    const infoDiv = document.getElementById('trend-info');
    
    if (type === 'itemLevel') {
        // 渲染裝備等級曲線 (取最近 5 次)
    } else {
        // 渲染排名曲線 (type 是排名類型)
    }
}
```

### 3. 更新 processData 調用
將原本的:
```javascript
renderItemLevelChart(json);
renderRankingChart(json, '1');
```

改為:
```javascript
renderTrendChart(json, 'itemLevel'); // 預設顯示裝備等級
```

### 4. 更新按鈕事件監聽器
將 `.ranking-tab` 改為 `.trend-tab`

## 當前狀態
- ✅ HTML 結構已更新
- ⏳ JavaScript 需要重構
- ⏳ 事件監聽器需要更新
