<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>健檢分析測試</title>
    <style>
        body {
            background: #1a1a1a;
            color: #fff;
            font-family: sans-serif;
            padding: 20px;
        }

        .suggestion {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #00d4ff;
        }

        .title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .desc {
            font-size: 13px;
            color: #bdc3c7;
            line-height: 1.5;
        }
    </style>
</head>

<body>
    <h2>健檢分析測試</h2>
    <div id="output"></div>

    <script src="equipment-score.js?v=20260217_0231"></script>
    <script>
        // 測試數據
        const testBreakdown = {
            rarity: {
                score: 15,
                maxScore: 30,
                details: [
                    { name: '測試武器', rarityKey: 'mythic', isShining: false, pureEnchantLevel: 18, exceedLevel: 3 },
                    { name: '測試胸甲', rarityKey: 'legendary', isShining: true, pureEnchantLevel: 20, exceedLevel: 5 }
                ]
            },
            board: { score: 10, details: [] },
            petInsight: { score: 12, totalClean: 5 },
            stigma: { score: 20, totalPoints: 600 },
            title: { score: 3, ownedCount: 150, totalCount: 400 }
        };

        try {
            const suggestions = getScoreAnalysis(testBreakdown);
            console.log('建議數量:', suggestions.length);
            console.log('建議內容:', suggestions);

            const output = document.getElementById('output');
            if (suggestions.length === 0) {
                output.innerHTML = '<p style="color: red;">❌ 沒有產生任何建議!</p>';
            } else {
                output.innerHTML = suggestions.map(s => `
                    <div class="suggestion">
                        <div class="title">${s.title} (${s.priority}優先級)</div>
                        <div class="desc">${s.desc}</div>
                    </div>
                `).join('');
            }
        } catch (error) {
            document.getElementById('output').innerHTML = `<p style="color: red;">❌ 錯誤: ${error.message}</p><pre>${error.stack}</pre>`;
            console.error('錯誤:', error);
        }
    </script>
</body>

</html>